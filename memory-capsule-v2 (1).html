<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Memory Capsule â€” Find Your Pattern</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;1,400;1,500&family=Lato:wght@300;400&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --bg: #080c14;
  --surface: #0e1420;
  --surface2: #141c2e;
  --border: rgba(255,255,255,0.07);
  --gold: #c8a96e;
  --gold-dim: rgba(200,169,110,0.15);
  --blue: #6e9dc8;
  --rose: #c87b7b;
  --text: #e8e0d5;
  --muted: rgba(232,224,213,0.45);
  --glow: rgba(200,169,110,0.12);
}

html { scroll-behavior: smooth; }

body {
  background: var(--bg);
  color: var(--text);
  font-family: 'Lato', sans-serif;
  font-weight: 300;
  min-height: 100vh;
  overflow-x: hidden;
}

/* Star field */
#stars-canvas {
  position: fixed;
  inset: 0;
  z-index: 0;
  pointer-events: none;
}

/* Radial glow center */
body::after {
  content: '';
  position: fixed;
  top: 30%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 700px;
  height: 700px;
  background: radial-gradient(circle, rgba(200,169,110,0.04) 0%, transparent 70%);
  pointer-events: none;
  z-index: 0;
}

/* Layout */
.container {
  position: relative;
  z-index: 10;
  max-width: 920px;
  margin: 0 auto;
  padding: 0 28px 100px;
}

/* Nav */
nav {
  position: relative;
  z-index: 20;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 28px;
  max-width: 920px;
  margin: 0 auto;
}

.nav-logo {
  font-family: 'Playfair Display', serif;
  font-style: italic;
  font-size: 1.2rem;
  color: var(--gold);
  letter-spacing: 0.05em;
}

.nav-count {
  font-size: 0.72rem;
  letter-spacing: 0.2em;
  text-transform: uppercase;
  color: var(--muted);
}

.nav-count span {
  color: var(--gold);
  font-weight: 400;
}

/* Hero */
.hero {
  text-align: center;
  padding: 52px 0 60px;
  animation: fadeIn 1s ease forwards;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(16px); }
  to { opacity: 1; transform: translateY(0); }
}

.hero-eyebrow {
  font-size: 0.7rem;
  letter-spacing: 0.3em;
  text-transform: uppercase;
  color: var(--gold);
  opacity: 0.8;
  margin-bottom: 18px;
}

.hero h1 {
  font-family: 'Playfair Display', serif;
  font-weight: 400;
  font-size: clamp(2.4rem, 5.5vw, 4rem);
  line-height: 1.15;
  letter-spacing: 0.01em;
  color: var(--text);
}

.hero h1 em {
  font-style: italic;
  color: var(--gold);
}

.hero p {
  margin-top: 18px;
  font-size: 0.95rem;
  color: var(--muted);
  max-width: 460px;
  margin-left: auto;
  margin-right: auto;
  line-height: 1.7;
}

/* Add memory card */
.add-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 36px;
  margin-bottom: 48px;
  position: relative;
  overflow: hidden;
  animation: fadeIn 1s ease 0.2s both;
}

.add-card::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, var(--gold), transparent);
  opacity: 0.4;
}

.card-title {
  font-family: 'Playfair Display', serif;
  font-style: italic;
  font-size: 1.15rem;
  color: var(--gold);
  margin-bottom: 24px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.card-title::after {
  content: '';
  flex: 1;
  height: 1px;
  background: var(--border);
}

/* Photo upload */
.upload-row {
  display: grid;
  grid-template-columns: 180px 1fr;
  gap: 20px;
  align-items: start;
  margin-bottom: 20px;
}

.photo-upload {
  width: 180px;
  height: 140px;
  border: 1.5px dashed rgba(200,169,110,0.3);
  border-radius: 6px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.3s;
  overflow: hidden;
  background: rgba(200,169,110,0.03);
  position: relative;
}

.photo-upload:hover {
  border-color: var(--gold);
  background: rgba(200,169,110,0.07);
}

.photo-upload img {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: none;
}

.photo-upload.has-photo img { display: block; }
.photo-upload.has-photo .ph-hint { display: none; }

.ph-hint {
  text-align: center;
  pointer-events: none;
}

.ph-hint svg {
  width: 28px;
  height: 28px;
  stroke: var(--gold);
  opacity: 0.5;
  margin-bottom: 8px;
}

.ph-hint p {
  font-size: 0.72rem;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  color: var(--muted);
}

input[type="file"] { display: none; }

.fields-col {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* Inputs */
input[type="text"], textarea, select {
  width: 100%;
  background: var(--surface2);
  border: 1px solid var(--border);
  border-radius: 5px;
  padding: 12px 16px;
  color: var(--text);
  font-family: 'Lato', sans-serif;
  font-size: 0.9rem;
  font-weight: 300;
  outline: none;
  transition: border-color 0.25s;
}

input[type="text"]::placeholder, textarea::placeholder { color: var(--muted); }
input[type="text"]:focus, textarea:focus, select:focus { border-color: rgba(200,169,110,0.5); }

textarea {
  min-height: 80px;
  resize: none;
  line-height: 1.6;
}

select { cursor: pointer; }
select option { background: var(--surface2); }

.input-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
}

/* Mood selector */
.mood-selector {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  margin-top: 4px;
}

.mood-btn {
  padding: 6px 14px;
  border: 1px solid var(--border);
  border-radius: 20px;
  background: transparent;
  color: var(--muted);
  font-size: 0.75rem;
  letter-spacing: 0.08em;
  cursor: pointer;
  transition: all 0.2s;
  font-family: 'Lato', sans-serif;
}

.mood-btn:hover, .mood-btn.active {
  border-color: var(--gold);
  color: var(--gold);
  background: var(--gold-dim);
}

.mood-label {
  font-size: 0.72rem;
  letter-spacing: 0.15em;
  text-transform: uppercase;
  color: var(--muted);
  margin-bottom: 8px;
}

/* Add button */
.btn-add {
  width: 100%;
  margin-top: 24px;
  padding: 14px;
  background: var(--gold-dim);
  border: 1px solid rgba(200,169,110,0.3);
  border-radius: 5px;
  color: var(--gold);
  font-family: 'Playfair Display', serif;
  font-style: italic;
  font-size: 1rem;
  letter-spacing: 0.08em;
  cursor: pointer;
  transition: all 0.25s;
}

.btn-add:hover {
  background: rgba(200,169,110,0.25);
  border-color: var(--gold);
}

/* Memories section */
.section-header {
  display: flex;
  align-items: center;
  gap: 16px;
  margin-bottom: 24px;
  animation: fadeIn 1s ease 0.3s both;
}

.section-header h2 {
  font-family: 'Playfair Display', serif;
  font-weight: 400;
  font-size: 1.4rem;
  white-space: nowrap;
}

.section-header .line {
  flex: 1;
  height: 1px;
  background: var(--border);
}

/* Memory grid */
.memories-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 16px;
  margin-bottom: 48px;
  animation: fadeIn 1s ease 0.4s both;
}

.mem-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 6px;
  overflow: hidden;
  cursor: pointer;
  transition: transform 0.25s, border-color 0.25s, box-shadow 0.25s;
  position: relative;
}

.mem-card:hover {
  transform: translateY(-3px);
  border-color: rgba(200,169,110,0.3);
  box-shadow: 0 8px 32px rgba(0,0,0,0.4);
}

.mem-card.selected {
  border-color: var(--gold);
  box-shadow: 0 0 0 1px var(--gold), 0 8px 32px rgba(200,169,110,0.15);
}

.mem-card.selected::after {
  content: 'âœ“';
  position: absolute;
  top: 8px;
  right: 8px;
  width: 22px;
  height: 22px;
  background: var(--gold);
  color: var(--bg);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.7rem;
  font-weight: 400;
}

.mem-photo {
  width: 100%;
  height: 120px;
  object-fit: cover;
  display: block;
}

.mem-photo-placeholder {
  width: 100%;
  height: 120px;
  background: var(--surface2);
  display: flex;
  align-items: center;
  justify-content: center;
}

.mem-photo-placeholder svg {
  width: 28px;
  height: 28px;
  stroke: var(--muted);
  opacity: 0.3;
}

.mem-body {
  padding: 12px;
}

.mem-title {
  font-family: 'Playfair Display', serif;
  font-style: italic;
  font-size: 0.9rem;
  color: var(--text);
  margin-bottom: 4px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.mem-meta {
  font-size: 0.7rem;
  color: var(--muted);
  letter-spacing: 0.08em;
  margin-bottom: 8px;
}

.mem-mood {
  display: inline-block;
  font-size: 0.65rem;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  padding: 2px 9px;
  border-radius: 10px;
  border: 1px solid var(--border);
  color: var(--muted);
}

.mem-mood.Nostalgic { border-color: rgba(110,157,200,0.4); color: var(--blue); }
.mem-mood.Joyful { border-color: rgba(200,169,110,0.4); color: var(--gold); }
.mem-mood.Bittersweet { border-color: rgba(200,123,123,0.4); color: var(--rose); }
.mem-mood.Peaceful { border-color: rgba(110,200,157,0.4); color: #6ec89d; }
.mem-mood.Adventurous { border-color: rgba(200,169,110,0.4); color: var(--gold); }
.mem-mood.Loving { border-color: rgba(200,123,123,0.4); color: var(--rose); }

.empty-grid {
  grid-column: 1/-1;
  text-align: center;
  padding: 50px;
  color: var(--muted);
  font-family: 'Playfair Display', serif;
  font-style: italic;
  font-size: 1rem;
  border: 1px dashed var(--border);
  border-radius: 6px;
}

/* Discover pattern section */
.discover-section {
  animation: fadeIn 1s ease 0.5s both;
}

.discover-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 40px;
  position: relative;
  overflow: hidden;
  text-align: center;
}

.discover-card::before {
  content: '';
  position: absolute;
  bottom: 0; left: 0; right: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, var(--gold), transparent);
  opacity: 0.3;
}

/* Constellation animation */
.constellation {
  position: relative;
  height: 90px;
  margin: 0 auto 24px;
  width: 260px;
}

.c-star {
  position: absolute;
  width: 5px;
  height: 5px;
  border-radius: 50%;
  background: var(--gold);
  opacity: 0;
  animation: starPop 0.5s ease forwards;
}

.c-star::after {
  content: '';
  position: absolute;
  inset: -3px;
  border-radius: 50%;
  background: var(--gold);
  opacity: 0.2;
  animation: starGlow 2s ease-in-out infinite;
}

@keyframes starPop {
  to { opacity: 1; transform: scale(1); }
  from { opacity: 0; transform: scale(0); }
}

@keyframes starGlow {
  0%, 100% { transform: scale(1); opacity: 0.2; }
  50% { transform: scale(2); opacity: 0.05; }
}

.c-line {
  position: absolute;
  height: 1px;
  background: linear-gradient(90deg, var(--gold), transparent);
  opacity: 0;
  transform-origin: left center;
  animation: lineGrow 0.6s ease forwards;
}

@keyframes lineGrow {
  from { width: 0; opacity: 0; }
  to { opacity: 0.25; }
}

.discover-title {
  font-family: 'Playfair Display', serif;
  font-size: 1.5rem;
  font-weight: 400;
  margin-bottom: 10px;
}

.discover-desc {
  font-size: 0.88rem;
  color: var(--muted);
  line-height: 1.7;
  max-width: 420px;
  margin: 0 auto 28px;
}

.btn-discover {
  display: inline-block;
  padding: 16px 44px;
  background: linear-gradient(135deg, rgba(200,169,110,0.2), rgba(200,169,110,0.08));
  border: 1px solid var(--gold);
  border-radius: 5px;
  color: var(--gold);
  font-family: 'Playfair Display', serif;
  font-style: italic;
  font-size: 1.05rem;
  letter-spacing: 0.08em;
  cursor: pointer;
  transition: all 0.3s;
  position: relative;
  overflow: hidden;
}

.btn-discover::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, rgba(200,169,110,0.3), rgba(200,169,110,0.1));
  opacity: 0;
  transition: opacity 0.3s;
}

.btn-discover:hover::before { opacity: 1; }
.btn-discover span { position: relative; z-index: 1; }

.min-notice {
  font-size: 0.7rem;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  color: var(--muted);
  margin-top: 14px;
  opacity: 0.6;
}

/* Loading */
.loading-state {
  display: none;
  padding: 20px 0;
}

.loading-state.visible { display: block; }

.loading-orbs {
  display: flex;
  justify-content: center;
  gap: 10px;
  margin-bottom: 16px;
}

.orb {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: var(--gold);
  animation: orbFloat 1.8s ease-in-out infinite;
  opacity: 0.4;
}

.orb:nth-child(2) { animation-delay: 0.3s; background: var(--blue); }
.orb:nth-child(3) { animation-delay: 0.6s; background: var(--rose); }

@keyframes orbFloat {
  0%, 100% { transform: translateY(0); opacity: 0.4; }
  50% { transform: translateY(-10px); opacity: 1; }
}

.loading-text {
  font-family: 'Playfair Display', serif;
  font-style: italic;
  font-size: 1rem;
  color: var(--muted);
  text-align: center;
  animation: pulse 2s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 0.4; }
  50% { opacity: 1; }
}

/* Insights output */
.insights-output {
  display: none;
  margin-top: 52px;
  animation: fadeIn 0.8s ease forwards;
}

.insights-output.visible { display: block; }

.insights-header {
  text-align: center;
  margin-bottom: 40px;
}

.insights-header .eyebrow {
  font-size: 0.68rem;
  letter-spacing: 0.3em;
  text-transform: uppercase;
  color: var(--gold);
  margin-bottom: 12px;
}

.insights-header h2 {
  font-family: 'Playfair Display', serif;
  font-size: 2rem;
  font-weight: 400;
}

/* Insight cards */
.insights-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
  margin-bottom: 32px;
}

.insight-block {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: 28px;
  position: relative;
  overflow: hidden;
  animation: fadeIn 0.6s ease both;
}

.insight-block:nth-child(1) { animation-delay: 0.1s; }
.insight-block:nth-child(2) { animation-delay: 0.2s; }
.insight-block:nth-child(3) { animation-delay: 0.3s; }
.insight-block:nth-child(4) { animation-delay: 0.4s; }

.insight-block::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 2px;
  background: linear-gradient(90deg, var(--gold), transparent);
  opacity: 0.3;
}

.insight-icon {
  font-size: 1.5rem;
  margin-bottom: 12px;
}

.insight-label {
  font-size: 0.68rem;
  letter-spacing: 0.2em;
  text-transform: uppercase;
  color: var(--gold);
  margin-bottom: 8px;
  opacity: 0.8;
}

.insight-value {
  font-family: 'Playfair Display', serif;
  font-size: 1.05rem;
  font-style: italic;
  line-height: 1.5;
  color: var(--text);
}

/* Big insight */
.big-insight {
  background: var(--surface);
  border: 1px solid rgba(200,169,110,0.2);
  border-radius: 8px;
  padding: 36px 40px;
  position: relative;
  overflow: hidden;
  margin-bottom: 20px;
  animation: fadeIn 0.8s ease 0.5s both;
}

.big-insight::before {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(ellipse at top left, rgba(200,169,110,0.05), transparent 60%);
}

.big-insight-label {
  font-size: 0.68rem;
  letter-spacing: 0.25em;
  text-transform: uppercase;
  color: var(--gold);
  margin-bottom: 16px;
  opacity: 0.8;
}

.big-insight-text {
  font-family: 'Playfair Display', serif;
  font-size: 1.2rem;
  font-weight: 400;
  line-height: 1.75;
  color: var(--text);
  position: relative;
}

/* Message */
.ai-message {
  background: linear-gradient(135deg, rgba(110,157,200,0.06), rgba(200,123,123,0.06));
  border: 1px solid var(--border);
  border-left: 2px solid var(--gold);
  border-radius: 6px;
  padding: 28px 32px;
  animation: fadeIn 0.8s ease 0.7s both;
}

.ai-message-label {
  font-size: 0.68rem;
  letter-spacing: 0.2em;
  text-transform: uppercase;
  color: var(--gold);
  margin-bottom: 12px;
  opacity: 0.7;
}

.ai-message-text {
  font-family: 'Playfair Display', serif;
  font-style: italic;
  font-size: 1.1rem;
  line-height: 1.8;
  color: var(--text);
}

/* Delete btn on mem card */
.mem-delete {
  position: absolute;
  top: 6px; right: 6px;
  width: 20px; height: 20px;
  background: rgba(0,0,0,0.6);
  border: none;
  border-radius: 50%;
  color: var(--muted);
  font-size: 0.7rem;
  cursor: pointer;
  display: none;
  align-items: center;
  justify-content: center;
  line-height: 1;
  z-index: 5;
}

.mem-card:hover .mem-delete { display: flex; }
.mem-delete:hover { color: var(--rose); }

/* Demo data button */
.demo-btn {
  font-size: 0.75rem;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  color: var(--muted);
  background: none;
  border: 1px dashed var(--border);
  border-radius: 4px;
  padding: 8px 16px;
  cursor: pointer;
  transition: all 0.2s;
  display: block;
  margin: 0 auto 12px;
  font-family: 'Lato', sans-serif;
}

.demo-btn:hover { color: var(--gold); border-color: rgba(200,169,110,0.3); }

@media (max-width: 620px) {
  .upload-row { grid-template-columns: 1fr; }
  .photo-upload { width: 100%; }
  .input-row { grid-template-columns: 1fr; }
  .insights-grid { grid-template-columns: 1fr; }
  .add-card, .discover-card { padding: 24px; }
}

/* â”€â”€ Memory Detail Overlay â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.overlay {
  position: fixed; inset: 0; z-index: 999;
  display: flex; align-items: center; justify-content: center; padding: 20px;
  opacity: 0; pointer-events: none; transition: opacity 0.3s ease;
}
.overlay.open { opacity: 1; pointer-events: all; }
.overlay-backdrop {
  position: absolute; inset: 0;
  background: rgba(4,6,12,0.9); backdrop-filter: blur(14px); cursor: pointer;
}
.overlay-panel {
  position: relative; z-index: 1; width: 100%; max-width: 560px;
  max-height: 90vh; overflow-y: auto;
  background: var(--surface); border: 1px solid rgba(200,169,110,0.2);
  border-radius: 10px;
  transform: translateY(28px) scale(0.96);
  transition: transform 0.38s cubic-bezier(0.16,1,0.3,1);
  scrollbar-width: none;
}
.overlay-panel::-webkit-scrollbar { display: none; }
.overlay.open .overlay-panel { transform: translateY(0) scale(1); }
.overlay-photo { width: 100%; height: 240px; object-fit: cover; display: block; border-radius: 10px 10px 0 0; }
.overlay-photo-placeholder {
  width: 100%; height: 120px; background: var(--surface2);
  display: flex; align-items: center; justify-content: center;
  border-radius: 10px 10px 0 0;
}
.overlay-photo-placeholder svg { width: 36px; height: 36px; stroke: var(--muted); opacity: 0.2; }
.overlay-body { padding: 28px 32px 32px; }
.overlay-close {
  position: absolute; top: 12px; right: 12px;
  width: 32px; height: 32px; border-radius: 50%;
  background: rgba(0,0,0,0.55); border: 1px solid var(--border);
  color: var(--muted); font-size: 0.85rem; cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  transition: all 0.2s; z-index: 2;
}
.overlay-close:hover { color: var(--text); border-color: var(--gold); }
.overlay-meta { font-size: 0.68rem; letter-spacing: 0.2em; text-transform: uppercase; color: var(--gold); opacity: 0.7; margin-bottom: 10px; }
.overlay-title { font-family: 'Playfair Display', serif; font-size: 1.55rem; font-weight: 400; line-height: 1.2; margin-bottom: 14px; }
.overlay-desc { font-size: 0.92rem; line-height: 1.75; color: var(--muted); margin-bottom: 16px; }
.overlay-mood {
  display: inline-block; font-size: 0.67rem; letter-spacing: 0.15em;
  text-transform: uppercase; padding: 4px 12px; border-radius: 12px;
  border: 1px solid var(--border); color: var(--muted); margin-bottom: 26px;
}
.overlay-divider { height: 1px; background: var(--border); margin-bottom: 22px; }
.overlay-ai-label {
  font-size: 0.67rem; letter-spacing: 0.2em; text-transform: uppercase;
  color: var(--gold); opacity: 0.8; margin-bottom: 14px;
  display: flex; align-items: center; gap: 8px;
}
.overlay-ai-label::after { content: ''; flex: 1; height: 1px; background: var(--border); }
.overlay-ai-box {
  background: rgba(200,169,110,0.05); border: 1px solid rgba(200,169,110,0.15);
  border-left: 2px solid var(--gold); border-radius: 6px;
  padding: 20px 22px; min-height: 76px;
}
.overlay-ai-text { font-family: 'Playfair Display', serif; font-style: italic; font-size: 1rem; line-height: 1.75; color: var(--text); }
.overlay-ai-loading { display: flex; align-items: center; gap: 10px; }
.overlay-ai-loading span { font-size: 0.8rem; color: var(--muted); font-style: italic; }
.overlay-footer { display: flex; justify-content: space-between; align-items: center; margin-top: 22px; }
.overlay-delete {
  background: none; border: 1px solid rgba(200,123,123,0.3); color: var(--rose);
  padding: 8px 18px; border-radius: 4px; font-size: 0.75rem;
  letter-spacing: 0.1em; text-transform: uppercase; cursor: pointer;
  font-family: 'Lato', sans-serif; transition: all 0.2s;
}
.overlay-delete:hover { background: rgba(200,123,123,0.1); }

</style>
</head>
<body>

<canvas id="stars-canvas"></canvas>

<nav>
  <div class="nav-logo">Memory Capsule</div>
  <div class="nav-count"><span id="memCount">0</span> memories saved</div>
</nav>

<div class="container">

  <!-- Hero -->
  <div class="hero">
    <div class="hero-eyebrow">âœ¦ &nbsp; Your life has a pattern &nbsp; âœ¦</div>
    <h1>What do your<br><em>best moments</em> have<br>in common?</h1>
    <p>Save your memories. Let AI connect the dots â€” and show you who you truly are.</p>
  </div>

  <!-- Add Memory -->
  <div class="add-card">
    <div class="card-title">Add a Memory</div>

    <div class="upload-row">
      <label for="photoIn">
        <div class="photo-upload" id="photoUpload">
          <div class="ph-hint">
            <svg viewBox="0 0 24 24" fill="none" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="3" width="18" height="18" rx="2"/>
              <circle cx="8.5" cy="8.5" r="1.5"/>
              <polyline points="21 15 16 10 5 21"/>
            </svg>
            <p>Add photo</p>
          </div>
          <img id="photoPreview" alt="">
        </div>
      </label>
      <input type="file" id="photoIn" accept="image/*">

      <div class="fields-col">
        <input type="text" id="memTitle" placeholder="Give this memory a nameâ€¦">
        <textarea id="memDesc" placeholder="Describe it â€” what do you remember most?"></textarea>
        <div class="input-row">
          <input type="text" id="memDate" placeholder="When? (e.g. Summer 2019)">
          <input type="text" id="memPlace" placeholder="Where?">
        </div>
      </div>
    </div>

    <div class="mood-label">How did it feel?</div>
    <div class="mood-selector" id="moodSelector">
      <button class="mood-btn" data-mood="Nostalgic">Nostalgic</button>
      <button class="mood-btn" data-mood="Joyful">Joyful</button>
      <button class="mood-btn" data-mood="Bittersweet">Bittersweet</button>
      <button class="mood-btn" data-mood="Peaceful">Peaceful</button>
      <button class="mood-btn" data-mood="Adventurous">Adventurous</button>
      <button class="mood-btn" data-mood="Loving">Loving</button>
    </div>

    <button class="btn-add" onclick="addMemory()">+ Save this memory</button>
  </div>

  <!-- Saved Memories -->
  <div class="section-header">
    <h2>Your Memories</h2>
    <div class="line"></div>
  </div>

  <div class="memories-grid" id="memoriesGrid">
    <div class="empty-grid">No memories yet â€” add your first one above</div>
  </div>

  <!-- Discover Pattern -->
  <div class="discover-section">
    <div class="discover-card">
      <div class="constellation" id="constellation"></div>
      <div class="discover-title">Discover Your Pattern</div>
      <div class="discover-desc">Once you've saved a few memories, AI will analyze them all and reveal what truly makes you happy â€” the places, people, and moments that define you.</div>

      <button class="demo-btn" onclick="loadDemoData()">âœ¦ Load demo memories to try</button>

      <button class="btn-discover" onclick="discoverPattern()">
        <span>âœ¦ &nbsp; Find my pattern &nbsp; âœ¦</span>
      </button>
      <div class="min-notice">Works best with 3+ memories</div>

      <div class="loading-state" id="loadingState">
        <div class="loading-orbs">
          <div class="orb"></div>
          <div class="orb"></div>
          <div class="orb"></div>
        </div>
        <div class="loading-text">Reading your memoriesâ€¦</div>
      </div>
    </div>
  </div>

  <!-- Insights Output -->
  <div class="insights-output" id="insightsOutput">
    <div class="insights-header">
      <div class="eyebrow">AI Pattern Analysis</div>
      <h2>Here's what your memories reveal</h2>
    </div>

    <div class="insights-grid" id="insightsGrid"></div>

    <div class="big-insight" id="bigInsight">
      <div class="big-insight-label">The Big Picture</div>
      <div class="big-insight-text" id="bigInsightText"></div>
    </div>

    <div class="ai-message" id="aiMessage">
      <div class="ai-message-label">A message for you</div>
      <div class="ai-message-text" id="aiMessageText"></div>
    </div>
  </div>

</div>

<!-- Memory Detail Overlay -->
<div class="overlay" id="memOverlay">
  <div class="overlay-backdrop" onclick="closeOverlay()"></div>
  <div class="overlay-panel" id="overlayPanel">
    <button class="overlay-close" onclick="closeOverlay()">âœ•</button>
    <div id="overlayPhotoWrap"></div>
    <div class="overlay-body">
      <div class="overlay-meta" id="overlayMeta"></div>
      <div class="overlay-title" id="overlayTitle"></div>
      <div class="overlay-desc" id="overlayDesc"></div>
      <div class="overlay-mood" id="overlayMood"></div>
      <div class="overlay-divider"></div>
      <div class="overlay-ai-label">âœ¦ &nbsp; What AI sees in this memory</div>
      <div class="overlay-ai-box" id="overlayAiBox">
        <div class="overlay-ai-loading">
          <div class="orb" style="animation-delay:0s"></div>
          <div class="orb" style="animation-delay:0.25s"></div>
          <div class="orb" style="animation-delay:0.5s"></div>
          <span>Reading your memoryâ€¦</span>
        </div>
      </div>
      <div class="overlay-footer">
        <button class="overlay-delete" id="overlayDeleteBtn">Delete memory</button>
      </div>
    </div>
  </div>
</div>

<script>
const API_KEY = 'YOUR_API_KEY_HERE'; // ðŸ”‘ Replace with your Anthropic API key

let memories = [];
let selectedMood = '';
let currentPhoto = null;

// Stars background
const canvas = document.getElementById('stars-canvas');
const ctx = canvas.getContext('2d');
let stars = [];

function initStars() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  stars = Array.from({ length: 160 }, () => ({
    x: Math.random() * canvas.width,
    y: Math.random() * canvas.height,
    r: Math.random() * 1.2 + 0.2,
    o: Math.random() * 0.6 + 0.1,
    speed: Math.random() * 0.003 + 0.001,
    phase: Math.random() * Math.PI * 2
  }));
}

function drawStars() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  stars.forEach(s => {
    s.phase += s.speed;
    const opacity = s.o * (0.6 + 0.4 * Math.sin(s.phase));
    ctx.beginPath();
    ctx.arc(s.x, s.y, s.r, 0, Math.PI * 2);
    ctx.fillStyle = `rgba(232,224,213,${opacity})`;
    ctx.fill();
  });
  requestAnimationFrame(drawStars);
}

window.addEventListener('resize', initStars);
initStars();
drawStars();

// Constellation animation
function animateConstellation() {
  const c = document.getElementById('constellation');
  c.innerHTML = '';
  const points = [
    [20, 70], [70, 20], [130, 55], [180, 15], [220, 60], [170, 80], [100, 75]
  ];
  const lines = [[0,1],[1,2],[2,3],[3,4],[4,5],[5,6],[6,2]];

  lines.forEach(([a, b], i) => {
    const p1 = points[a], p2 = points[b];
    const dx = p2[0] - p1[0], dy = p2[1] - p1[1];
    const len = Math.sqrt(dx*dx + dy*dy);
    const angle = Math.atan2(dy, dx) * 180 / Math.PI;
    const line = document.createElement('div');
    line.className = 'c-line';
    line.style.cssText = `left:${p1[0]}px;top:${p1[1]}px;width:${len}px;transform:rotate(${angle}deg);animation-delay:${i*0.1}s;`;
    c.appendChild(line);
  });

  points.forEach(([x, y], i) => {
    const star = document.createElement('div');
    star.className = 'c-star';
    star.style.cssText = `left:${x-2}px;top:${y-2}px;animation-delay:${i*0.08}s;`;
    c.appendChild(star);
  });
}

animateConstellation();
setInterval(animateConstellation, 5000);

// Mood selector
document.getElementById('moodSelector').addEventListener('click', e => {
  if (e.target.classList.contains('mood-btn')) {
    document.querySelectorAll('.mood-btn').forEach(b => b.classList.remove('active'));
    e.target.classList.add('active');
    selectedMood = e.target.dataset.mood;
  }
});

// Photo upload
document.getElementById('photoIn').addEventListener('change', function(e) {
  const file = e.target.files[0];
  if (!file) return;
  const reader = new FileReader();
  reader.onload = ev => {
    currentPhoto = ev.target.result;
    document.getElementById('photoPreview').src = currentPhoto;
    document.getElementById('photoUpload').classList.add('has-photo');
  };
  reader.readAsDataURL(file);
});

function addMemory() {
  const title = document.getElementById('memTitle').value.trim();
  const desc = document.getElementById('memDesc').value.trim();
  const date = document.getElementById('memDate').value.trim();
  const place = document.getElementById('memPlace').value.trim();

  if (!title && !desc) { alert('Add a title or description âœ¦'); return; }

  memories.push({
    id: Date.now(),
    title: title || 'Untitled memory',
    desc,
    date: date || '',
    place: place || '',
    mood: selectedMood || 'Nostalgic',
    image: currentPhoto
  });

  // Reset
  document.getElementById('memTitle').value = '';
  document.getElementById('memDesc').value = '';
  document.getElementById('memDate').value = '';
  document.getElementById('memPlace').value = '';
  document.getElementById('photoPreview').src = '';
  document.getElementById('photoUpload').classList.remove('has-photo');
  document.querySelectorAll('.mood-btn').forEach(b => b.classList.remove('active'));
  selectedMood = '';
  currentPhoto = null;

  renderGrid();
}

function deleteMemory(id) {
  memories = memories.filter(m => m.id !== id);
  renderGrid();
}

function renderGrid() {
  const grid = document.getElementById('memoriesGrid');
  document.getElementById('memCount').textContent = memories.length;

  if (!memories.length) {
    grid.innerHTML = '<div class="empty-grid">No memories yet â€” add your first one above</div>';
    return;
  }

  grid.innerHTML = memories.map(m => `
    <div class="mem-card" id="card-${m.id}" onclick="openMemory(${m.id})" style="cursor:pointer;">
      <button class="mem-delete" onclick="deleteMemory(${m.id}); event.stopPropagation();">âœ•</button>
      ${m.image
        ? `<img class="mem-photo" src="${m.image}" alt="">`
        : `<div class="mem-photo-placeholder"><svg viewBox="0 0 24 24" fill="none" stroke-width="1.3"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg></div>`
      }
      <div class="mem-body">
        <div class="mem-title">${m.title}</div>
        <div class="mem-meta">${[m.date, m.place].filter(Boolean).join(' Â· ') || '&nbsp;'}</div>
        <div class="mem-mood ${m.mood}">${m.mood}</div>
      </div>
    </div>
  `).join('');
}

// Demo data
function loadDemoData() {
  memories = [
    { id: 1, title: "Sunrise at the sea", desc: "Woke up before anyone else and watched the sun rise over the water. Dad was there, quiet, just us two.", date: "Summer 2018", place: "Latakia coast", mood: "Peaceful", image: null },
    { id: 2, title: "Graduation day", desc: "Everyone was proud. Mom was crying. I remember the feeling of finally being done.", date: "June 2022", place: "University, Nablus", mood: "Joyful", image: null },
    { id: 3, title: "Road trip through the north", desc: "Just friends, an old car, no plan. We got lost three times and laughed the entire way.", date: "Spring 2021", place: "Northern roads", mood: "Adventurous", image: null },
    { id: 4, title: "Ramadan nights with family", desc: "After iftar, everyone gathered. My grandmother told old stories. The whole house smelled like coffee.", date: "Ramadan 2019", place: "Grandma's house", mood: "Loving", image: null },
    { id: 5, title: "First time I built something real", desc: "Stayed up until 4am finishing a project. When it finally worked, I sat alone in the dark and smiled.", date: "Late 2023", place: "Home", mood: "Joyful", image: null },
    { id: 6, title: "A quiet afternoon that mattered", desc: "Nothing happened. I was reading by the window. But I remember feeling completely at peace.", date: "Winter 2020", place: "My room", mood: "Nostalgic", image: null },
  ];
  renderGrid();
  document.querySelector('.demo-btn').textContent = 'âœ“ Demo memories loaded';
}

async function discoverPattern() {
  if (memories.length < 2) {
    alert('Add at least 2 memories first âœ¦');
    return;
  }

  document.getElementById('loadingState').classList.add('visible');
  document.getElementById('insightsOutput').classList.remove('visible');

  const memoriesText = memories.map((m, i) =>
    `Memory ${i+1}: "${m.title}" | Where: ${m.place || 'unknown'} | When: ${m.date || 'unknown'} | Mood: ${m.mood} | Description: ${m.desc}`
  ).join('\n');

  try {
    const response = await fetch('https://api.anthropic.com/v1/messages', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        model: 'claude-sonnet-4-20250514',
        max_tokens: 1000,
        system: `You analyze a person's saved memories and find deep emotional patterns. 
Return ONLY a valid JSON object â€” no markdown, no backticks, no explanation:
{
  "insights": [
    { "icon": "emoji", "label": "short label", "value": "1-2 sentence insight" },
    { "icon": "emoji", "label": "short label", "value": "1-2 sentence insight" },
    { "icon": "emoji", "label": "short label", "value": "1-2 sentence insight" },
    { "icon": "emoji", "label": "short label", "value": "1-2 sentence insight" }
  ],
  "bigPicture": "2-3 sentences about the overall pattern. What truly brings this person happiness? Be specific, emotional, insightful.",
  "message": "A warm, personal message to this person based on their memories. Like a letter from someone who knows them deeply. 2-3 sentences. Make it feel like a gentle revelation."
}`,
        messages: [{ role: 'user', content: `Here are my memories:\n${memoriesText}\n\nAnalyze my patterns.` }]
      })
    });

    const data = await response.json();
    const raw = data.content.map(i => i.text || '').join('');
    const clean = raw.replace(/```json|```/g, '').trim();
    const parsed = JSON.parse(clean);
    displayInsights(parsed);

  } catch (err) {
    console.error(err);
    // Demo fallback
    displayInsights({
      insights: [
        { icon: "ðŸŒŠ", label: "Where you feel free", value: "Most of your happiest moments happen near water or open spaces â€” the sea, the road, a window. You need openness to feel alive." },
        { icon: "ðŸ‘¥", label: "Who matters most", value: "Your best memories almost always involve family â€” especially quiet moments with them, not big events." },
        { icon: "ðŸŒ…", label: "When magic happens", value: "You're drawn to early mornings and late nights â€” the edges of the day when the world is quiet and belongs to you." },
        { icon: "ðŸ¤«", label: "What you overlook", value: "Some of your deepest memories are ordinary moments. You find meaning in stillness, not just in milestones." }
      ],
      bigPicture: "You are someone who finds joy not in loud celebrations, but in quiet presence â€” the smell of coffee, the sound of someone you love, the feeling of being exactly where you're supposed to be. Your happiest self is unhurried.",
      message: "You've been collecting proof of a beautiful life without even realizing it. These memories aren't random â€” they're telling you something. The things that made you feel most alive? You can have more of them. You know what they are now."
    });
  }

  document.getElementById('loadingState').classList.remove('visible');
}

function displayInsights(data) {
  document.getElementById('insightsGrid').innerHTML = data.insights.map((ins, i) => `
    <div class="insight-block" style="animation-delay:${0.1 * (i+1)}s">
      <div class="insight-icon">${ins.icon}</div>
      <div class="insight-label">${ins.label}</div>
      <div class="insight-value">${ins.value}</div>
    </div>
  `).join('');

  document.getElementById('bigInsightText').textContent = data.bigPicture;
  document.getElementById('aiMessageText').textContent = data.message;

  document.getElementById('insightsOutput').classList.add('visible');
  setTimeout(() => {
    document.getElementById('insightsOutput').scrollIntoView({ behavior: 'smooth', block: 'start' });
  }, 100);
}

// â”€â”€ Memory detail overlay â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let activeMemoryId = null;

function openMemory(id) {
  const m = memories.find(x => x.id === id);
  if (!m) return;
  activeMemoryId = id;

  // Photo
  const photoWrap = document.getElementById('overlayPhotoWrap');
  if (m.image) {
    photoWrap.innerHTML = `<img class="overlay-photo" src="${m.image}" alt="">`;
  } else {
    photoWrap.innerHTML = `<div class="overlay-photo-placeholder"><svg viewBox="0 0 24 24" fill="none" stroke-width="1.3"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg></div>`;
  }

  // Text
  document.getElementById('overlayMeta').textContent = [m.date, m.place].filter(Boolean).join(' Â· ') || 'A moment in time';
  document.getElementById('overlayTitle').textContent = m.title;
  document.getElementById('overlayDesc').textContent = m.desc || 'No description added.';
  document.getElementById('overlayMood').textContent = m.mood;

  // Delete button
  document.getElementById('overlayDeleteBtn').onclick = () => {
    deleteMemory(id);
    closeOverlay();
  };

  // Reset AI box to loading state
  document.getElementById('overlayAiBox').innerHTML = `
    <div class="overlay-ai-loading">
      <div class="orb" style="animation-delay:0s"></div>
      <div class="orb" style="animation-delay:0.25s"></div>
      <div class="orb" style="animation-delay:0.5s"></div>
      <span>Reading your memoryâ€¦</span>
    </div>`;

  // Open overlay
  document.getElementById('memOverlay').classList.add('open');
  document.body.style.overflow = 'hidden';

  // Call AI
  analyzeOneMemory(m);
}

function closeOverlay() {
  document.getElementById('memOverlay').classList.remove('open');
  document.body.style.overflow = '';
}

// Close on ESC
document.addEventListener('keydown', e => { if (e.key === 'Escape') closeOverlay(); });

async function analyzeOneMemory(m) {
  const prompt = `This is one of my most cherished memories.
Title: "${m.title}"
When: ${m.date || 'unknown'}
Where: ${m.place || 'unknown'}
Mood: ${m.mood}
Description: ${m.desc || 'none'}

Look deep into this single memory and return ONLY raw JSON (no markdown):
{
  "insight": "A 2-3 sentence emotional observation about this specific memory. What does it reveal about this person? What makes this moment special? Be warm, poetic, and personal â€” not generic."
}`;

  try {
    const response = await fetch('https://api.anthropic.com/v1/messages', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        model: 'claude-sonnet-4-20250514',
        max_tokens: 300,
        system: 'You are a warm, emotionally intelligent AI that finds deep meaning in personal memories. Return ONLY raw JSON, no markdown.',
        messages: [{ role: 'user', content: prompt }]
      })
    });

    const data = await response.json();
    const raw = data.content.map(i => i.text || '').join('');
    const clean = raw.replace(/```json|```/g, '').trim();
    const parsed = JSON.parse(clean);
    showAiInsight(parsed.insight);

  } catch (err) {
    // Fallback insight based on mood
    const fallbacks = {
      Peaceful: "There's something about stillness that you seek â€” and this memory is proof you know how to find it. You didn't need anything extraordinary. Just the right moment, and you were completely present.",
      Joyful: "Joy like this doesn't happen by accident. You were exactly where you needed to be, with exactly the right people. This memory is a map back to your happiest self.",
      Nostalgic: "This memory lives in you because part of you knows that moment was rare. You felt it even then â€” that quiet awareness that something beautiful was happening.",
      Bittersweet: "The most meaningful memories often carry both joy and ache. This one stayed with you because it mattered â€” deeply, truly, in a way that changed something in you.",
      Adventurous: "You were fully alive in this memory. No hesitation, no plan â€” just you and the moment. This is the version of yourself you return to when you need courage.",
      Loving: "Love like this is the kind that leaves a mark. This memory isn't just about the people in it â€” it's about who you become when you're surrounded by them."
    };
    showAiInsight(fallbacks[m.mood] || fallbacks.Nostalgic);
  }
}

function showAiInsight(text) {
  document.getElementById('overlayAiBox').innerHTML = `<div class="overlay-ai-text">${text}</div>`;
}

</script>
</body>
</html>
